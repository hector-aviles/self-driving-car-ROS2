
1) Download: 

$ git clone https://github.com/hector-aviles/self-driving-car-ROS2

2) Enter subdirectory 

cd self-driving-car-ROS2/ros2_ws
colcon build

3) You will open 3 terminals, and in each one source:

source install/setup.bash
source ~/source_code/venv/bin/activate # required to enable beepy

sudo cp -r src/self_driving_car/controllers/bmw_x5_controller/ /usr/local/webots/projects/vehicles/controllers/

sudo cp -r src/self_driving_car/controllers/supervisor_opposite_autonomous_1/ /usr/local/webots/projects/vehicles/controllers/

sudo cp -r src/self_driving_car/controllers/supervisor/ /usr/local/webots/projects/default/controllers/supervisor/

4) Execute 30 runs per world
 

######################   
# Action policy:
######################

ros2 launch self_driving_car head_on_1.py
ros2 run decision_making action_policy 0 3 7

ros2 launch self_driving_car head_on_2.py
ros2 run decision_making action_policy 3 2 4

ros2 launch self_driving_car head_on_3.py
ros2 run decision_making action_policy -3 4 7

ros2 launch self_driving_car side_swipe_1.py # (No hay choque)
ros2 run decision_making action_policy 0 9 0

ros2 launch self_driving_car side_swipe_2.py # (No hay choque)
ros2 run decision_making action_policy 6 0 0

ros2 launch self_driving_car t_bone_1.py
ros2 run decision_making action_policy 0 -7 0 

ros2 launch self_driving_car t_bone_2.py
ros2 run decision_making action_policy 0 7 0

######################   
# Counterfactuals:
######################

ros2 launch self_driving_car head_on_1.py
ros2 run decision_making counterfactuals 0 3 7 counterfactuals_90_percent_rep_5.csv counterfactuals_combinations_random_choices.csv

ros2 launch self_driving_car head_on_2.py
ros2 run decision_making counterfactuals 3 2 4 counterfactuals_90_percent_rep_5.csv counterfactuals_combinations_random_choices.csv

ros2 launch self_driving_car head_on_3.py
ros2 run decision_making counterfactuals -3 4 7 counterfactuals_90_percent_rep_5.csv counterfactuals_combinations_random_choices.csv

ros2 launch self_driving_car side_swipe_1.py # (No hay choque)
ros2 run decision_making counterfactuals 0 9 0 counterfactuals_90_percent_rep_5.csv counterfactuals_combinations_random_choices.csv

ros2 launch self_driving_car side_swipe_2.py # (No hay choque)
ros2 run decision_making counterfactuals 6 0 0 counterfactuals_90_percent_rep_5.csv counterfactuals_combinations_random_choices.csv

ros2 launch self_driving_car t_bone_1.py
ros2 run decision_making counterfactuals 0 -7 0 counterfactuals_90_percent_rep_5.csv counterfactuals_combinations_random_choices.csv 

ros2 launch self_driving_car t_bone_2.py
ros2 run decision_making counterfactuals 0 7 0 counterfactuals_90_percent_rep_5.csv counterfactuals_combinations_random_choices.csv
